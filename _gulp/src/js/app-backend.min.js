"use strict";Vue.component("crud-filters",{props:["filters","translation","locale"],template:"#crud-filters",data:function(){return{pickers:{},expandFilters:!1,filterClass:"default--text"}},methods:{clearFilters:function(){for(var t in this.filters)this.filters[t].value=null;this.filterClass="default--text",this.filterItems()},filterItems:function(){this.$root.getItems()},closePicker:function(t){this.pickers[t]=!1},clearPicker:function(t){this.filters[t].value="",this.pickers[t]=!1},changeFilter:function(t){this.checkFiltersActive()},checkFiltersActive:function(){for(var t in this.filters)if(this.filters[t].value)return void(this.filterClass="primary--text");this.filterClass="default--text"}},mounted:function(){for(var t in this.filters)this.filters[t].value&&(this.expandFilters=!0),"date"===this.filters[t].type&&(this.pickers[t]=!1);this.checkFiltersActive()},watch:{}}),Vue.component("crud-edit",{props:["translation","fields","action","edit","locale"],template:"#crud-edit",data:function(){return{item:{},editActive:!1}},methods:{save:function(t){this.$root.calledAction.subject=t,this.$root.callAction(),this.editActive=!1},cancel:function(){this.editActive=!1}},watch:{edit:{handler:function(){this.item=this.edit?Object.assign({},this.action().subject):{},this.edit&&(this.editActive=!0)}},editActive:{handler:function(){this.editActive||(this.$root.edit=!1)}}}}),Vue.component("crud-item-actions",{props:["item","actions"],template:"#crud-item-actions",data:function(){return{}},methods:{itemAction:function(t,e){this.$root.executeAction(t,e)}},mounted:function(){},watch:{}}),Vue.component("crud-top-button-actions",{props:["item","actions"],template:"#crud-top-button-actions",data:function(){return{}},methods:{buttonAction:function(t){this.$root.executeAction({},t)}},mounted:function(){},watch:{}});var NiceModulesCrudApp={debug:!0,run:function(t){this.vuetify(t.crud)},log:function(t){this.debug&&console.log(t)},vuetify:function(t){var n=this;n.vue=new Vue({el:"#nm-crud",vuetify:new Vuetify({theme:{dark:!1},lang:{locales:{lc:t.translation},current:"lc"}}),data:{items:[],fields:t.fields,headers:t.headers,count:0,options:t.CrudOptions,loading:!1,filters:t.filters,translation:t.translation,locale:t.locale,deleteDialog:!1,edit:!1,confirm:!1,calledAction:{},selectedItems:[]},beforeMount:function(){},mounted:function(){},methods:{executeAction:function(t,e){if(this.calledAction=e,this.calledAction.subject=t,this.calledAction.confirm)this.confirm=!0;else switch(this.calledAction.name){case"add":case"edit":this.edit=!this.edit;break;default:this.callAction()}},callAction:function(){var i=this;i.loading=!0,i.confirm=!1,jQuery.ajax({url:i.calledAction.uri,data:{item:JSON.stringify(i.calledAction.subject)},type:"POST",dataType:"json",success:function(t){i.getItems()},error:function(t,e){i.handleAjaxError(t,e)}}),i.calledAction={}},getCalledAction:function(){return this.calledAction},closeConfirm:function(){this.confirm=!1},getItems:function(){var i=this;this.loading=!0,n.log("CRUD options: "),n.log(i.options),n.log("Crud filters: "),n.log(t.filters),n.log("CRUD uris: "),n.log(t.uris),jQuery.ajax({url:t.uris.getItems,data:{options:JSON.stringify(i.options),filters:JSON.stringify(i.filters)},type:"POST",dataType:"json",success:function(t){i.loading=!1,i.items=t.items,i.count=t.count,console.log(t.count)},error:function(t,e){i.handleAjaxError(t,e)}})},handleAjaxError:function(t,e){var i="";0===t.status?i="Not connected.\n Verify Network.":404==t.status?i="Requested page not found. [404]":500==t.status?i="Internal Server Error [500]":"parsererror"===e?i="Requested JSON parse failed":"timeout"===e?i="Time out error.":"abort"===e&&(i="Ajax request aborted."),i=i+", Response text: "+t.responseText,n.log(i)}},watch:{options:{handler:function(){this.getItems()},deep:!0},items:{handler:function(t,e){},deep:!0}}})}};