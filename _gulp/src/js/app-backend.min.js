"use strict";Vue.component("crud-filters",{props:["filters","translation","locale"],template:"#crud-filters",data:function(){return{pickers:{},expandFilters:!1,filterClass:"default--text"}},methods:{clearFilters:function(){for(var t in this.filters)this.filters[t].value=null;this.filterClass="default--text",this.filterItems()},filterItems:function(){this.$root.getItems()},closePicker:function(t){this.pickers[t]=!1},clearPicker:function(t){this.filters[t].value="",this.pickers[t]=!1},changeFilter:function(t){this.checkFiltersActive()},checkFiltersActive:function(){for(var t in this.filters)if(this.filters[t].value)return void(this.filterClass="primary--text");this.filterClass="default--text"}},mounted:function(){for(var t in this.filters)this.filters[t].value&&(this.expandFilters=!0),"date"===this.filters[t].type&&(this.pickers[t]=!1);this.checkFiltersActive()},watch:{}}),Vue.component("crud-edit",{props:["translation","fields","get_item","edit","locale"],template:"#crud-edit",data:function(){return{add:!1,item:{},editActive:!1}},methods:{save:function(t){},cancel:function(){this.editActive=!1}},mounted:function(){this.add=this.$root.options.allowAdd},watch:{edit:{handler:function(){this.item=this.edit?Object.assign({},this.get_item()):{},this.edit&&(this.editActive=!0)}},editActive:{handler:function(){this.editActive||(this.$root.edit=!1)}}}});var NiceModulesCrudApp={debug:!0,run:function(t){this.vuetify(t.crud)},log:function(t){this.debug&&console.log(t)},vuetify:function(t){var s=this;s.vue=new Vue({el:"#nm-crud",vuetify:new Vuetify({theme:{dark:!1},lang:{locales:{lc:t.translation},current:"lc"}}),data:{items:[],fields:t.fields,headers:t.headers,count:0,options:t.CrudOptions,loading:!1,filters:t.filters,translation:t.translation,locale:t.locale,editDialog:!1,deleteDialog:!1,edit:!1,editedItem:{}},beforeMount:function(){},mounted:function(){},methods:{editItem:function(t){this.editedItem=t||{},this.edit=!this.edit},getEditedItem:function(){return this.editedItem},saveItem:function(t){},deleteItem:function(t){var e=t.id;this.items.findIndex(function(t){return t.id===e})},deleteConfirm:function(t){},closeDelete:function(){},getItems:function(){var i=this;this.loading=!0,s.log("CRUD options: "),s.log(i.options),s.log("Crud filters: "),s.log(t.filters),s.log("CRUD uris: "),s.log(t.uris),jQuery.ajax({url:t.uris.getItems,data:{options:JSON.stringify(i.options),filters:JSON.stringify(i.filters)},type:"POST",dataType:"json",success:function(t){i.loading=!1,i.items=t.items,i.count=t.count,console.log(t.count)},error:function(t,e){i.handleAjaxError(t,e)}})},handleAjaxError:function(t,e){var i="";0===t.status?i="Not connected.\n Verify Network.":404==t.status?i="Requested page not found. [404]":500==t.status?i="Internal Server Error [500]":"parsererror"===e?i="Requested JSON parse failed":"timeout"===e?i="Time out error.":"abort"===e&&(i="Ajax request aborted."),i=i+", Response text: "+t.responseText,s.log(i)}},watch:{options:{handler:function(){this.getItems()},deep:!0},items:{handler:function(t,e){},deep:!0}}})}};