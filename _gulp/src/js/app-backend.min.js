"use strict";var NiceModulesCrudApp={debug:!0,run:function(t){this.vuetify(t.crud)},log:function(t){this.debug&&console.log(t)},vuetify:function(t){var n=this;n.vue=new Vue({el:"#nm-crud",vuetify:new Vuetify({theme:{dark:!1},lang:{locales:{lc:t.translation},current:"lc"}}),data:{items:[],fields:t.fields,headers:t.headers,count:0,options:t.CrudOptions,loading:!1,filters:t.filters,hasFilters:!1,translation:t.translation,locale:t.locale,deleteDialog:!1,edit:!1,confirm:!1,calledAction:{},selectedItems:[],languages:t.languages,selectedLanguage:t.selectedLanguage,languageAction:t.languageAction,snackbars:{success:{text:"",active:!1},error:{text:"",active:!1}},status:{error:0,success:1}},beforeMount:function(){},mounted:function(){this.hasFilters=Object.keys(this.filters).length,console.log(this.languages)},methods:{executeAction:function(t,e){if(this.calledAction=e,this.calledAction.subject=t,this.calledAction.confirm)this.confirm=!0;else switch(this.calledAction.name){case"add":case"edit":this.edit=!this.edit;break;default:this.callAction()}},callAction:function(){var s=this;s.loading=!0,s.confirm=!1,jQuery.ajax({url:s.calledAction.uri,data:{subject:JSON.stringify(s.calledAction.subject)},type:"POST",dataType:"json",success:function(t){n.log("RESPONSE:"),n.log(t),t.status===s.status.success&&s.snackbarSuccess(t.messages),t.status===s.status.error&&s.snackbarError(t.messages),s.getItems()},error:function(t,e){s.handleAjaxError(t,e)}}),s.calledAction={}},getCalledAction:function(){return this.calledAction},closeConfirm:function(){this.confirm=!1},getItems:function(){var s=this;this.loading=!0,n.log("CRUD options: "),n.log(s.options),n.log("Crud filters: "),n.log(t.filters),n.log("CRUD uris: "),n.log(t.uris),jQuery.ajax({url:t.uris.getItems,data:{options:JSON.stringify(s.options),filters:JSON.stringify(s.filters)},type:"POST",dataType:"json",success:function(t){s.loading=!1,s.items=t.items,s.count=t.count},error:function(t,e){s.handleAjaxError(t,e)}})},snackbarSuccess:function(t){this.snackbars.success.active=!0,this.snackbars.success.text=t.join("<br>"),n.log("SNACKBAR:: "),n.log(this.snackbars.success)},snackbarError:function(t){this.snackbars.error.active=!0,this.snackbars.error.text=t.join("<br>")},handleAjaxError:function(t,e){var s="";0===t.status?s="Not connected.\n Verify Network.":404==t.status?s="Requested page not found. [404]":500==t.status?s="Internal Server Error [500]":"parsererror"===e?s="Requested JSON parse failed":"timeout"===e?s="Time out error.":"abort"===e&&(s="Ajax request aborted."),s=s+", Response text: "+t.responseText,n.log(s)}},watch:{options:{handler:function(){this.getItems()},deep:!0},items:{handler:function(t,e){},deep:!0}}})}};